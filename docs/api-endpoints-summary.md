# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¨ä½“è¨­è¨ˆ

## æ¦‚è¦

4ã¤ã®æ©Ÿèƒ½å®Ÿè£…ã«å¿…è¦ãª**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**ã‚’æ•´ç†ã€‚

- **Laravel API** (`/api/`): ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€CRUDã€èªè¨¼ã€å±¥æ­´ç®¡ç†
- **Flask API** (`/papi/`): AIæ¨è«–ï¼ˆQwen-VLï¼‰ã€ç”»åƒå‡¦ç†ã€è»Šä¸¡æŸ»å®š

---

## ğŸ“Š ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

### ğŸ”µ Flask API (`/papi/`) - AI/ç”»åƒå‡¦ç†ç³»

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | é–¢é€£æ©Ÿèƒ½ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|---------|--------|
| 1 | `/papi/recognize` | POST | ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆèªè­˜ï¼ˆQwen-VLï¼‰ | license-plate-recognition | ğŸ”´é«˜ |
| 2 | `/papi/validate-image` | POST | ç”»åƒå“è³ªæ¤œè¨¼ï¼ˆã¼ã‚„ã‘ã€è§’åº¦ã€ç…§æ˜ï¼‰ | license-plate-recognition | ğŸŸ¡ä¸­ |
| 3 | `/papi/appraise-vehicle` | POST | è»Šä¸¡æŸ»å®šï¼ˆAI/å¤–éƒ¨APIçµ±åˆï¼‰ | vehicle-value-tokenization | ğŸŸ¡ä¸­ |

**Flask APIåˆè¨ˆ**: **3ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**

---

### ğŸŸ¢ Laravel API (`/api/`) - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ç³»

#### 1. èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|--------|
| 4 | `/api/auth/connect` | POST | ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ¥ç¶šã«ã‚ˆã‚‹èªè¨¼ | ğŸ”´é«˜ |
| 5 | `/api/auth/logout` | POST | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | ğŸŸ¡ä¸­ |
| 6 | `/api/user/profile` | GET | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾— | ğŸŸ¡ä¸­ |

#### 2. ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ã‚¦ã‚©ãƒ¬ãƒƒãƒˆç®¡ç†

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | é–¢é€£æ©Ÿèƒ½ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|---------|--------|
| 7 | `/api/plates/register` | POST | ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆç™»éŒ² | wallet-address-conversion | ğŸ”´é«˜ |
| 8 | `/api/plates/{plateNumber}` | GET | ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±å–å¾— | wallet-address-conversion | ğŸ”´é«˜ |
| 9 | `/api/plates/wallet/{plateNumber}` | GET | ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆâ†’ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ› | wallet-address-conversion | ğŸ”´é«˜ |
| 10 | `/api/plates/validate-rental` | POST | ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ãƒŠãƒ³ãƒãƒ¼åˆ¤å®š | wallet-address-conversion | ğŸŸ¡ä¸­ |

#### 3. æŠ•ã’éŠ­æ©Ÿèƒ½

**âš ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰æ›´**: æŠ•ã’éŠ­æ©Ÿèƒ½ã¯ **Laravel API ã‚’ä½¿ç”¨ã›ãš**ã€**x402 MCP + Next.js Server Components + Qwen AIï¼ˆOpenAI SDKï¼‰** ã§å®Ÿè£…ã—ã¾ã™ã€‚

**x402 Server (Hono) ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | å®Ÿè£…å ´æ‰€ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|---------|--------|
| 11 | `/tip` | POST | æŠ•ã’éŠ­ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ | pkgs/x402server | ğŸ”´é«˜ |
| 12 | `/tip/status/:txHash` | GET | ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾— | pkgs/x402server | ğŸŸ¡ä¸­ |

**Next.js Server Actions** (Laravel API ã®ä»£æ›¿):
- `sendTip()` - x402 MCP Client çµŒç”±ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- `fetchBlockchainHistory()` - viem/wagmi ã§ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã‹ã‚‰å±¥æ­´å–å¾—
- `sendNotification()` - PWA ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡
- `requestVoiceConfirmation()` - Qwen AI (OpenAI SDK) ã§éŸ³å£°ç¢ºèª

#### 4. è»Šä¸¡ä¾¡å€¤ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ãƒ»ãƒ­ãƒ¼ãƒ³æ©Ÿèƒ½

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | é–¢é€£æ©Ÿèƒ½ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|---------|--------|
| 13 | `/api/vehicles/register` | POST | è»Šä¸¡æƒ…å ±ç™»éŒ² | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 14 | `/api/vehicles/{id}` | GET | è»Šä¸¡æƒ…å ±å–å¾— | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 15 | `/api/vehicles/{id}/appraisal` | GET | æŸ»å®šçµæœå–å¾— | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 16 | `/api/vehicles/{id}/appraisal` | POST | æŸ»å®šçµæœä¿å­˜ï¼ˆFlaskçµæœã‚’ä¿å­˜ï¼‰ | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 17 | `/api/loans/status` | GET | ãƒ­ãƒ¼ãƒ³çŠ¶æ…‹å–å¾—ï¼ˆæ®‹é«˜ã€å€Ÿå…¥é¡ç­‰ï¼‰ | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 18 | `/api/loans/history` | GET | å€Ÿå…¥ãƒ»è¿”æ¸ˆå±¥æ­´ | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 19 | `/api/loans/borrow` | POST | æ‰‹å‹•å€Ÿå…¥è¨˜éŒ² | vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 20 | `/api/loans/repay` | POST | æ‰‹å‹•è¿”æ¸ˆè¨˜éŒ² | vehicle-value-tokenization | ğŸŸ¡ä¸­ |

#### 5. é€šçŸ¥æ©Ÿèƒ½

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | é–¢é€£æ©Ÿèƒ½ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|---------|--------|
| 21 | `/api/notifications/subscribe` | POST | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥è³¼èª­ç™»éŒ² | tipping-feature, vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 22 | `/api/notifications/unsubscribe` | POST | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥è³¼èª­è§£é™¤ | tipping-feature, vehicle-value-tokenization | ğŸŸ¢ä½ |
| 23 | `/api/notifications` | GET | é€šçŸ¥ä¸€è¦§å–å¾— | tipping-feature, vehicle-value-tokenization | ğŸŸ¡ä¸­ |
| 24 | `/api/notifications/{id}/read` | PUT | é€šçŸ¥æ—¢èª­ãƒãƒ¼ã‚¯ | tipping-feature, vehicle-value-tokenization | ğŸŸ¢ä½ |

#### 6. ãã®ä»–ãƒ»å…±é€šæ©Ÿèƒ½

| # | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½ | å„ªå…ˆåº¦ |
|---|--------------|---------|------|--------|
| 25 | `/api/transactions/history` | GET | å…¨ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´ | ğŸŸ¡ä¸­ |
| 26 | `/api/settings` | GET | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šå–å¾— | ğŸŸ¢ä½ |
| 27 | `/api/settings` | PUT | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šæ›´æ–° | ğŸŸ¢ä½ |

**Laravel APIåˆè¨ˆ**: **22ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**

---

## ğŸ“ˆ å…¨ä½“ã‚µãƒãƒªãƒ¼

| APIç¨®åˆ¥ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ•° | ä¸»ãªå½¹å‰² |
|---------|-----------------|---------|
| **Flask API** | 3 | AIæ¨è«–ã€ç”»åƒå‡¦ç†ã€è»Šä¸¡æŸ»å®š |
| **Laravel API** | 22 | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€CRUDã€èªè¨¼ã€å±¥æ­´ç®¡ç† |
| **x402 Server (Hono)** | 2 | æŠ•ã’éŠ­ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆx402 MCPçµŒç”±ï¼‰ |
| **Next.js Server Actions** | - | æŠ•ã’éŠ­ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€é€šçŸ¥ã€å±¥æ­´å–å¾—ï¼ˆLaravelä»£æ›¿ï¼‰ |
| **åˆè¨ˆ** | **27ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ** | - |

---

## ğŸ¯ å„ªå…ˆåº¦åˆ¥å†…è¨³

### ğŸ”´ é«˜å„ªå…ˆåº¦ï¼ˆPhase 1å¿…é ˆï¼‰: 9ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**Flask (3)**:
- `/papi/recognize` - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆèªè­˜

**Laravel (6)**:
- `/api/auth/connect` - èªè¨¼
- `/api/plates/register` - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆç™»éŒ²
- `/api/plates/{plateNumber}` - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±å–å¾—
- `/api/plates/wallet/{plateNumber}` - ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›

### ğŸŸ¡ ä¸­å„ªå…ˆåº¦ï¼ˆPhase 2-3ï¼‰: 16ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

æŠ•ã’éŠ­ã€è»Šä¸¡æŸ»å®šã€ãƒ­ãƒ¼ãƒ³ã€é€šçŸ¥ç­‰ã®ä¸»è¦æ©Ÿèƒ½

### ğŸŸ¢ ä½å„ªå…ˆåº¦ï¼ˆPhase 3ä»¥é™ï¼‰: 4ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

çµ±è¨ˆã€è©³ç´°æƒ…å ±ã€è¨­å®šç­‰ã®è£œåŠ©æ©Ÿèƒ½

---

## ğŸ“Š æ©Ÿèƒ½åˆ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ•°

| æ©Ÿèƒ½ | Flask | Laravel | x402 Server | Next.js Server Actions | åˆè¨ˆ |
|------|-------|---------|-------------|------------------------|------|
| **wallet-address-conversion** | 0 | 4 | 0 | 0 | 4 |
| **license-plate-recognition** | 2 | 0 | 0 | 0 | 2 |
| **tipping-feature** | 0 | 0 | 2 | 4 (sendTip, fetchHistory, sendNotification, voiceConfirmation) | 6 |
| **vehicle-value-tokenization** | 1 | 8 | 0 | 0 | 9 |
| **å…±é€šï¼ˆèªè¨¼ãƒ»é€šçŸ¥ãƒ»è¨­å®šï¼‰** | 0 | 10 | 0 | 0 | 10 |
| **åˆè¨ˆ** | **3** | **22** | **2** | **4** | **31** |

**æ³¨**: Next.js Server Actions ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã›ãšã€å‚è€ƒã¨ã—ã¦è¨˜è¼‰ã€‚å®Ÿè³ªçš„ãªãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ•°ã¯ **27**ï¼ˆFlask 3 + Laravel 22 + x402 2ï¼‰ã€‚

---

## ğŸš€ å®Ÿè£…æ¨å¥¨é †åº

### Phase 1: åŸºç›¤APIï¼ˆ9ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰

**Flask**:
1. `/papi/recognize` - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆèªè­˜

**Laravel**:
2. `/api/auth/connect` - èªè¨¼
3. `/api/plates/register` - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆç™»éŒ²
4. `/api/plates/{plateNumber}` - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±å–å¾—
5. `/api/plates/wallet/{plateNumber}` - ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›

**ç†ç”±**: ä»–æ©Ÿèƒ½ã®åŸºç›¤ã¨ãªã‚‹ãŸã‚æœ€å„ªå…ˆ

---

### Phase 2: æŠ•ã’éŠ­ãƒ»é€šçŸ¥ï¼ˆ8ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰

**x402 Server (Hono)**:
6. `/tip` - æŠ•ã’éŠ­ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
7. `/tip/status/:txHash` - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—

**Next.js Server Actions**:
- `sendTip()` - x402 MCPçµŒç”±ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- `fetchBlockchainHistory()` - viem/wagmiã§ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³å±¥æ­´å–å¾—
- `sendNotification()` - PWAãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡
- `requestVoiceConfirmation()` - Qwen AIéŸ³å£°ç¢ºèª

**Laravel**:
8. `/api/notifications/subscribe` - é€šçŸ¥è³¼èª­
9. `/api/notifications` - é€šçŸ¥ä¸€è¦§
10. `/api/transactions/history` - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´

**Flask**:
11. `/papi/validate-image` - ç”»åƒå“è³ªæ¤œè¨¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**ç†ç”±**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ãŒé«˜ã„æ©Ÿèƒ½ã€x402 MCP + Next.js Server Componentsã§å®Ÿè£…

---

### Phase 3: è»Šä¸¡ä¾¡å€¤ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ï¼ˆ10ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰

**Flask**:
12. `/papi/appraise-vehicle` - è»Šä¸¡æŸ»å®š

**Laravel**:
13. `/api/vehicles/register` - è»Šä¸¡æƒ…å ±ç™»éŒ²
14. `/api/vehicles/{id}` - è»Šä¸¡æƒ…å ±å–å¾—
15-16. `/api/vehicles/{id}/appraisal` (GET/POST) - æŸ»å®šçµæœ
17. `/api/loans/status` - ãƒ­ãƒ¼ãƒ³çŠ¶æ…‹
18. `/api/loans/history` - å€Ÿå…¥ãƒ»è¿”æ¸ˆå±¥æ­´
19. `/api/loans/borrow` - æ‰‹å‹•å€Ÿå…¥
20. `/api/loans/repay` - æ‰‹å‹•è¿”æ¸ˆ
(è¿½åŠ ) `/api/plates/validate-rental` - ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼åˆ¤å®š

**ç†ç”±**: è¤‡é›‘ãªæ©Ÿèƒ½ã€è»Šä¸¡æŸ»å®šAPIèª¿æŸ»å®Œäº†å¾Œã«å®Ÿè£…

---

## ğŸ’¡ å®Ÿè£…ã®æ³¨æ„ç‚¹

### Flask API (3ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)

**ç‰¹å¾´**:
- AIæ¨è«–ç‰¹åŒ–ï¼ˆQwen-VLï¼‰
- å‡¦ç†æ™‚é–“ãŒé•·ã„ï¼ˆ150msã€œæ•°ç§’ï¼‰
- éåŒæœŸå‡¦ç†æ¨å¥¨ï¼ˆCeleryæ¤œè¨ï¼‰

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:
- Flask 3.x
- OpenAI SDKï¼ˆQwen-VLç”¨ï¼‰
- PIL/OpenCVï¼ˆç”»åƒå‡¦ç†ï¼‰
- Redisï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

### Laravel API (22ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)

**ç‰¹å¾´**:
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ä¸­å¿ƒ
- CRUDæ“ä½œãŒå¤šã„
- èªè¨¼ãƒ»èªå¯å¿…é ˆ

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:
- Laravel 11.x
- MySQL 8.0+
- Laravel Sanctumï¼ˆAPIèªè¨¼ï¼‰
- Laravel Queueï¼ˆéåŒæœŸå‡¦ç†ï¼‰

### x402 Server (Hono) + Next.js Server Actions

**ç‰¹å¾´**:
- æŠ•ã’éŠ­æ©Ÿèƒ½å°‚ç”¨ï¼ˆLaravel APIä¸ä½¿ç”¨ï¼‰
- x402 MCPçµŒç”±ã§ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- Qwen AI (OpenAI SDK) ã«ã‚ˆã‚‹éŸ³å£°ç¢ºèª

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:
- Honoï¼ˆx402 Serverï¼‰
- MCP SDK for Node.jsï¼ˆx402_MCP_Clientï¼‰
- Next.js 14 Server Components/Actions
- viem/wagmiï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³å±¥æ­´å–å¾—ï¼‰
- OpenAI SDKï¼ˆQwen AIçµ±åˆï¼‰

---

## ğŸ” èªè¨¼æ–¹é‡

### ã™ã¹ã¦ã®Laravel APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**èªè¨¼æ–¹æ³•**: Laravel Sanctumï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹ï¼‰

**ãƒ˜ãƒƒãƒ€ãƒ¼**:
```
Authorization: Bearer {token}
```

**èªè¨¼ä¸è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `/api/auth/connect` ã®ã¿ï¼ˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ¥ç¶šã«ã‚ˆã‚‹èªè¨¼å–å¾—ï¼‰

---

## ğŸ“ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆLaravelï¼‰

### å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«

1. **users** - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
2. **license_plates** - ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±
3. **wallets** - ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæƒ…å ±
4. **tip_transactions** - æŠ•ã’éŠ­å±¥æ­´
5. **vehicles** - è»Šä¸¡æƒ…å ±
6. **appraisals** - æŸ»å®šçµæœ
7. **loans** - ãƒ­ãƒ¼ãƒ³å¥‘ç´„
8. **loan_transactions** - å€Ÿå…¥ãƒ»è¿”æ¸ˆå±¥æ­´
9. **notifications** - é€šçŸ¥
10. **push_subscriptions** - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥è³¼èª­æƒ…å ±

---

## â±ï¸ é–‹ç™ºå·¥æ•°è¦‹ç©ã‚‚ã‚Š

### Flask API (3ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ): 2-3é€±

- `/papi/recognize`: 1-1.5é€±ï¼ˆQwen-VLçµ±åˆã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–ï¼‰
- `/papi/validate-image`: 0.5-1é€±ï¼ˆç”»åƒå‡¦ç†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰
- `/papi/appraise-vehicle`: 0.5-1é€±ï¼ˆå¤–éƒ¨APIçµ±åˆ or AIå®Ÿè£…ï¼‰

### Laravel API (22ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ): 4-6é€±

**Phase 1ï¼ˆåŸºç›¤ï¼‰**: 2-3é€±
- èªè¨¼: 0.5é€±
- ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†: 1.5-2é€±

**Phase 2ï¼ˆé€šçŸ¥ï¼‰**: 0.5-1é€±
- é€šçŸ¥API: 0.5-1é€±

**Phase 3ï¼ˆè»Šä¸¡ãƒ»ãƒ­ãƒ¼ãƒ³ï¼‰**: 1.5-2é€±
- è»Šä¸¡ç®¡ç†: 0.5é€±
- ãƒ­ãƒ¼ãƒ³ç®¡ç†: 1-1.5é€±

### x402 Server + Next.js Server Actions (æŠ•ã’éŠ­æ©Ÿèƒ½): 2-3é€±

**x402 Server (Hono)**: 1-1.5é€±
- `/tip` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- ERC4337çµ±åˆ
- MCP ãƒ„ãƒ¼ãƒ«å®Ÿè£…

**Next.js Server Actions**: 1-1.5é€±
- x402_MCP_Clientå®Ÿè£…
- Qwen AI Serviceå®Ÿè£…ï¼ˆOpenAI SDKï¼‰
- å±¥æ­´å–å¾—ï¼ˆviem/wagmiï¼‰
- é€šçŸ¥é€ä¿¡

### åˆè¨ˆ: 6-9é€±ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™ºè€…1åï¼‰

---

## ğŸ”„ APIé–“é€£æºãƒ•ãƒ­ãƒ¼ä¾‹

### ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆèªè­˜ â†’ ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›

```
1. Frontend â†’ Flask `/papi/recognize`
   Request: { image: "base64..." }
   Response: { plateNumber: "å“å·330ã‚1234" }

2. Frontend â†’ Laravel `/api/plates/wallet/å“å·330ã‚1234`
   Request: GET
   Response: { walletAddress: "0x..." }
```

### è»Šä¸¡æŸ»å®š â†’ ãƒ­ãƒ¼ãƒ³å¥‘ç´„ä½œæˆ

```
1. Frontend â†’ Laravel `/api/vehicles/register`
   Request: { plateNumber, manufacturer, model, year, mileage }
   Response: { vehicleId: 123 }

2. Laravel â†’ Flask `/papi/appraise-vehicle`
   Request: { vehicleId: 123, manufacturer, model, year, mileage }
   Response: { appraisalAmount: 2000000, expiryDate: "2026-02-17" }

3. Laravel â†’ DB: æŸ»å®šçµæœä¿å­˜

4. Frontend â†’ SmartContract: ãƒ­ãƒ¼ãƒ³å¥‘ç´„ä½œæˆï¼ˆã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ï¼‰
```

---

**ä½œæˆæ—¥**: 2026-01-17  
**åˆ†æè€…**: Claude (Serena AI Agent)  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºå‚ç…§ç”¨
